<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <link rel="stylesheet" href="./image/font-awesome-4.7.0/font-awesome-4.7.0/css/font-awesome.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.css">
    <link rel="stylesheet" href="signin.css">
  <title>Clothing E-commerce - Sign In</title>
</head>

<body>

  <div style="text-align: center; line-height: normal;">
    <h2 class="text-danger go">CarryGo</h2>
    <h4>Welcome to CarryGo</h4>
    <p>
      Input same email and password you used for signup
    </p>
  </div>

  <div class="container shadow mt-5">
    <h2>SIGN IN</h2>
    <div>
      <img class="w-50" src="./image/online-wishes-list-concept-illustration_114360-3900.avif" alt="">
    </div>
    <!-- <form id="signinForm"> -->
      <input type="email" id="mail" placeholder="Email" required>
      <input type="password" id="pass" placeholder="Password" required>
      <button class="rounded" onclick="signIn()">Sign In</button>
    <!-- </form> -->
  </div>
  
  <script>
    customers =  JSON.parse(localStorage.getItem("user")) 

    const signIn=()=>{

      if(mail.value=="" && pass.value==""){
        Swal.fire({
              title: 'Sign in not successful',
              text: 'Input all details!',
              icon: 'error',
              confirmButtonText: 'OK'
             })
        return
      }
      
      var Userfound = false
      
        for (let index = 0; index < customers.length; index++) {     
                if(mail.value == customers[index].email && pass.value == customers[index].password){
                  localStorage.setItem("currentUserIndex", index)
                   Userfound = true
                   break
                }
            }
            if(Userfound){
              Swal.fire({
              title: 'Sign Up Successful',
              text: 'You have successfully signed in!',
              icon: 'success',
              confirmButtonText: 'OK'
             }).then(() => {
             window.location.href = 'landing.html';
             console.log(customers);
    });
            }else{
              Swal.fire({
              title: 'Sign Up Not Successful',
              text: 'Try again!',
              icon: 'error',
              confirmButtonText: 'OK'
              })
            }
      }
    

  </script>

</body>
</html>
